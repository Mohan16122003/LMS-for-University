<!DOCTYPE html>

<html
  lang="en"
  class="light-style layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="assets/"
  data-template="vertical-menu-template-free"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>Content Managent</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/img/favicon/favicon.png" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- Icons. Uncomment required icon fonts -->
    <link rel="stylesheet" href="assets/vendor/fonts/boxicons.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="assets/vendor/css/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="assets/vendor/js/helpers.js"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="assets/js/config.js"></script>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->
        
        <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
          <div class="app-brand demo">
            <a href="index.html" class="app-brand-link">
              <div class="logo">
                <a href="index.html" class="simple-text logo-mini">
                  <div class="logo-image-small">
                    <img src="assets/img/favicon/favicon.png">
                  </div>
                </a>
              </div>
              <span class="app-brand-text demo menu-text fw-bolder ms-2">CUTM - LMS</span>
            </a>

            <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
              <i class="bx bx-chevron-left bx-sm align-middle"></i>
            </a>
          </div>

          <div class="menu-inner-shadow"></div>

          <ul class="menu-inner py-1">
            <!-- Dashboard -->
            <li class="menu-item">
              <a href="index.html" class="menu-link">
                <i class="menu-icon tf-icons bx bxs-home-circle"></i>
                <div data-i18n="Analytics">Dashboard</div>
              </a>
            </li>

             <!-- user managment -->
            <li class="menu-item">
              <a href="manage-courses.html" class="menu-link">
                <i class="menu-icon tf-icons bx bxs-graduation"></i>
                <div data-i18n="Layouts">Manage Courses</div>
              </a>
            </li>

            <!-- Course Allotment -->
               <li class="menu-item">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                <i class="menu-icon tf-icons bx bx-list-check"></i>
                <div data-i18n="Layouts"> Course Allotment</div>
              </a>

             <ul class="menu-sub">
                <li class="menu-item">
                  <a href="faculty-alotment.html" class="menu-link">
                    <div data-i18n="Without menu"> Faculty Allotment</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="student-alotment.html" class="menu-link">
                    <div data-i18n="Without navbar"> Student Allotment</div>
                  </a>
                </li>
              </ul>
            </li>

            <!-- user managment -->
            <li class="menu-item">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                <i class="menu-icon tf-icons bx bxs-user"></i>
                <div data-i18n="Layouts">Manage Users</div>
              </a>

              <ul class="menu-sub">
                <li class="menu-item">
                  <a href="students.html" class="menu-link">
                    <div data-i18n="Without menu">Students</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="faculty.html" class="menu-link">
                    <div data-i18n="Without navbar">Faculty</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="admin.html" class="menu-link">
                    <div data-i18n="Container">Admins</div>
                  </a>
                </li>
              </ul>
            </li>

            <!-- Assignements -->
            <li class="menu-item active open">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                <i class="menu-icon tf-icons bx bxs-checkbox-checked"></i>
                <div data-i18n="Layouts">Assignements</div>
              </a>

              <ul class="menu-sub">
                <li class="menu-item">
                  <a href="faculty-assignement.html" class="menu-link">
                    <div data-i18n="Without menu">Assignments</div>
                  </a>
                </li>
                <li class="menu-item active">
                  <a href="student-assignement.html" class="menu-link">
                    <div data-i18n="Without navbar">Mapping</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="submitted-assignements.html" class="menu-link">
                    <div data-i18n="Without navbar">Submitted</div>
                  </a>
                </li>
              </ul>
            </li>

            <!-- content managment -->
            <li class="menu-item">
              <a href="content-management.html" class="menu-link">
                <i class="menu-icon tf-icons bx bxs-package"></i>
                <div data-i18n="Layouts">Materials</div>
              </a>


              <!-- <ul class="menu-sub">
                <li class="menu-item">
                  <a href="university-listings.html" class="menu-link">
                    <div data-i18n="Without menu">University Listings</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="accommdation-listings.html" class="menu-link">
                    <div data-i18n="Without menu">Accommodation Listings</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="part-time-job.html" class="menu-link">
                    <div data-i18n="Without navbar">Part-time Job Listings</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="content-moderation.html" class="menu-link">
                    <div data-i18n="Container">Content Moderation</div>
                  </a>
                </li>
              </ul> -->
            </li>

             <!-- Analytics -->
          <li class="menu-item">
              <a href="announcement.html" class="menu-link">
                <i class="menu-icon tf-icons bx bxs-megaphone"></i>
                <div data-i18n="Layouts">Announcements</div>
              </a>

              <!-- <ul class="menu-sub">
                <li class="menu-item">
                  <a href="user-engagement.html" class="menu-link">
                    <div data-i18n="Without menu">User Engagement</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="content-peformance.html" class="menu-link">
                    <div data-i18n="Without navbar">Content Performance</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="application-usage.html" class="menu-link">
                    <div data-i18n="Container">Application Usage</div>
                  </a>
                </li>
              </ul> -->
            </li>


<li class="menu-item">
              <a href="certificates.html" class="menu-link">
                <i class="menu-icon tf-icons bx bxs-certification"></i>
                <div data-i18n="Layouts">Report Card</div>
              </a>
            </li>



            <li class="menu-item">
              <a href="adminprofile.html" class="menu-link">
                <i class="menu-icon tf-icons bx bxs-cog"></i>
                <div data-i18n="Account Settings">Account Settings</div>
              </a>
            </li>
          </ul>
        </aside>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->

          <nav
            class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
            id="layout-navbar"
          >
            <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
              <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                <i class="bx bx-menu bx-sm"></i>
              </a>
            </div>

            <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
              <!-- Search -->
              <div class="navbar-nav align-items-center">
                <div class="nav-item d-flex align-items-center">
                  <a href="index.html"><button type="button" class="btn btn-primary"><i class="bx bx-home-alt"></i> Home </button></a>
                </div>
              </div>
              <!-- /Search -->

              <ul class="navbar-nav flex-row align-items-center ms-auto">
              

                <!-- User -->
                <li class="nav-item navbar-dropdown dropdown-user dropdown">
                  <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                    <div class="avatar avatar-online">
                  <img
                                  src="assets/img/avatars/avatar.png"
                                  alt="user-avatar"
                                  class="d-block rounded-circle user-avatar"
                                  height="100"
                                  width="100"
                              />
                    </div>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                      <a class="dropdown-item" href="#">
                        <div class="d-flex">
                          <div class="flex-shrink-0 me-3">
                            <div class="avatar avatar-online">
                          <img
                                  src="assets/img/avatars/avatar.png"
                                  alt="user-avatar"
                                  class="d-block rounded-circle user-avatar"
                                  height="100"
                                  width="100"
                              />
                            </div>
                          </div>
                          <div class="flex-grow-1">
                          <span class="username"></span><br>
                          <small class="text-muted">Admin</small>
                        </div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                       <a class="dropdown-item" href="adminprofile.html">
                        <i class="bx bx-user me-2"></i>
                        <span class="align-middle">My Profile</span>
                      </a>
                    </li>
                   
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                   <li id="logoutLink">
    <a class="dropdown-item" href="#">
        <i class="bx bx-power-off me-2"></i>
        <span class="align-middle">Log Out</span>
    </a>
</li>

                  </ul>
                </li>
                <!--/ User -->
              </ul>
            </div>
          </nav>

          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              <!-- Button trigger modal -->
            <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">
              Assign to student
            </button> -->

            <!-- Modal -->
            <div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <!-- <h5 class="modal-title" id="addUserModalLabel">Add User</h5> -->
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <form id="addUserForm" enctype="multipart/form-data">
                      <div class="mb-3">
                        <label for="userID" class="form-label">User ID</label>
                        <input type="text" class="form-control" id="userID" name="userID" required>
                      </div>
                      <div class="mb-3">
                        <label for="courseID" class="form-label">Course ID</label>
                        <input type="text" class="form-control" id="courseID" name="courseID" required>
                      </div>
                      <div class="mb-3">
                        <label for="fromdate" class="form-label">From Date</label>
                        <input type="date" class="form-control" id="fromdate" name="fromdate" required>
                      </div>
                      <div class="mb-3">
                        <label for="todate" class="form-label">To Date</label>
                        <input type="date" class="form-control" id="todate" name="todate" required>
                      </div>
                      <div class="mb-3">
                        <label for="status" class="form-label">Status</label>
                        <select class="form-select" id="status" name="status" required>
                          <option value="Passed">Passed</option>
                          <option value="Failed">Failed</option>
                          <option value="Ongoing">Ongoing</option>
                          <option value="Withdrawn">Withdrawn</option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="role" class="form-label">Role</label>
                        <select class="form-select" id="role" name="role" required>
                          <option value="faculty">Faculty</option>
                          <option value="student">Student</option>
                        </select>
                      </div>
                      <button type="submit" class="btn btn-primary">Submit</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <div class="card mt-3">
              <div class="table-responsive text-nowrap">
                <table class="table table-hover">
                  <thead>
                    <tr>
                      <th>StudentID</th>
                     
                      <th>Submission Date</th>
                      <th>Grade</th>
                      <th>Status</th>
                      <th>Submission Path</th>
                      
                    </tr>
                  </thead>
                  <tbody class="table-border-bottom-0" id="assigmentList">
                    
                  </tbody>
                </table>
              </div>
            </div>

                            <!-- Modals -->
          <!-- View Course Modal -->
          <div class="modal fade" id="viewCourseModal" tabindex="-1" aria-labelledby="viewCourseModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="viewCourseModalLabel">View Course</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <p><strong>User:</strong> <span id="viewUserID"></span></p>
                  <p><strong>Course ID:</strong> <span id="viewCourseID"></span></p>
                  <p><strong>From Date:</strong> <span id="viewFromDate"></span></p>
                  <p><strong>To Date:</strong> <span id="viewToDate"></span></p>
                  <p><strong>Status:</strong> <span id="viewStatus"></span></p>
                  <p><strong>Created on:</strong> <span id="viewcreatedon"></span></p>
                  <p><strong>Role:</strong> <span id="viewRole"></span></p>
                </div>
              </div>
            </div>
          </div>

          <!-- Edit Course Modal -->
          <div class="modal fade" id="editCourseModal" tabindex="-1" aria-labelledby="editCourseModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="editCourseModalLabel">Edit Course</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form id="editCourseForm">
                    <input type="hidden" id="editCourseID" name="courseID">
                    <div class="mb-3">
                      <label for="editFromDate" class="form-label">From Date</label>
                      <input type="date" class="form-control" id="editFromDate" name="fromdate" required>
                    </div>
                    <div class="mb-3">
                      <label for="editToDate" class="form-label">To Date</label>
                      <input type="date" class="form-control" id="editToDate" name="todate" required>
                    </div>
                    <div class="mb-3">
                      <label for="editStatus" class="form-label">Status</label>
                      <select class="form-select" id="editStatus" name="status" required>
                        <option value="Passed">Passed</option>
                        <option value="Failed">Failed</option>
                        <option value="ongoing">Ongoing</option>
                        <option value="withdrawn">Withdrawn</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label for="editRole" class="form-label">Role</label>
                      <select class="form-select" id="editRole" name="role" required>
                        <option value="faculty">Faculty</option>
                        <option value="student">Student</option>
                      </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <!-- Delete Course Confirmation Modal -->
          <div class="modal fade" id="deleteCourseModal" tabindex="-1" aria-labelledby="deleteCourseModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="deleteCourseModalLabel">Delete Course</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  Are you sure you want to delete this course?
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-danger" id="confirmDeleteCourseBtn">Delete</button>
                </div>
              </div>
            </div>
          </div>


            <!-- /Modals -->


            </div>

            
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script>
              $(document).ready(function() {
    // Function to fetch data from PHP file
    function fetchData() {
        $.ajax({
            url: 'http://localhost/lms/admin/api/student-assignment1.php',
            type: 'GET',
            dataType: 'json',
            success: function(data) {
                // Clear existing table rows
                $('#assigmentList').empty();
                // Append fetched data to table
                $.each(data, function(index, item) {
                    var row = '<tr>' +
                        '<td>' + item.student_assignment_id + '</td>' +
                    
                        '<td>' + item.submission_date + '</td>' +
                        '<td>' + item.grade + '</td>' +
                        '<td>' + item.status + '</td>' +
                        '<td>' + item.submission_path + '</td>' +
                        '</tr>';
                    $('#assigmentList').append(row);
                });
            },
            error: function(xhr, status, error) {
                console.error(xhr.responseText);
            }
        });
    }

    // Fetch data on page load
    fetchData();
});

            </script>
            <!-- <script>
              $(document).ready(function() {
                  // Submit form data using AJAX
                $('#addUserForm').submit(function(e) {
                  e.preventDefault(); // Prevent form submission
                  
                  // Serialize form data
                  var formData = $(this).serialize();
                  
                  // Send AJAX POST request
                  $.ajax({
                    type: 'POST',
                    url: 'http://localhost/lms/admin/api/student-assignment.php', // Replace 'YOUR_PHP_SCRIPT_URL.php' with the actual URL of your PHP script
                    data: formData,
                    success: function(response) {
                      // Handle success response
                      console.log(response);
                      // Optionally, you can show a success message or redirect the user
                    },
                    error: function(xhr, status, error) {
                      // Handle error response
                      console.error(xhr.responseText);
                      // Optionally, you can show an error message to the user
                    }
                  });
                });
                // Function to handle view action
                function openViewModal(course) {
                  $('#viewUserID').text(course.UserID);
                  $('#viewCourseID').text(course.CourseID);
                  $('#viewFromDate').text(course.fromdate);
                  $('#viewToDate').text(course.todate);
                  $('#viewStatus').text(course.status);
                  $('#viewRole').text(course.role);
                  $('#viewcreatedon').text(course.createdon);
                  $('#viewCourseModal').modal('show');
                }
            
                // Function to handle edit action
                function openEditModal(course) {
                  $('#editCourseID').val(course.CourseID);
                  $('#editFromDate').val(course.fromdate);
                  $('#editToDate').val(course.todate);
                  $('#editStatus').val(course.status);
                  $('#editRole').val(course.role);
                  $('#editCourseModal').modal('show');
                }
            
                // Function to fetch course list from server
                function fetchCourseList() {
                  $.ajax({
                    type: 'GET',
                    url: 'http://localhost/lms/admin/api/student-assignment.php',
                    success: function(response) {
                      var courses = JSON.parse(response);
                      $('#assigmentList').empty(); // Clear previous list
                      $.each(courses, function(index, course) {
                        var row = $('<tr>');
                        row.append($('<td>').text(course.student_id));
                        row.append($('<td>').text(course.assignment_id));
                        row.append($('<td>').text(course.submission_date));
                        row.append($('<td>').text(course.grade));
                        row.append($('<td>').text(course.status));
                        row.append($('<td>').text(course.submission_path));
            
                        var actionCell = $('<td>'); // Define actionCell
            
                        var viewButton = $('<button class="btn btn-success rounded-pill mx-1 viewBtn">View</button>');
                        var editButton = $('<button class="btn btn-primary rounded-pill mx-1 editBtn">Edit</button>');
                        var deleteButton = $('<button class="btn btn-outline-danger rounded-pill mx-1 deleteBtn">Delete</button>');
            
                        // Add event listener for view button
                        viewButton.click(function() {
                          openViewModal(course); // Pass course object to view modal
                        });
            
                        // Add event listener for edit button
                        editButton.click(function() {
                          openEditModal(course); // Pass course object to edit modal
                        });
            
                        // Add event listener for delete button
                        deleteButton.click(function() {
                          var courseID = course.CourseID;
                          // Open delete confirmation modal
                          $('#deleteCourseModal').modal('show');
                          // Set data attribute to store course id
                          $('#confirmDeleteCourseBtn').data('course-id', courseID);
                        });
            
                        actionCell.append(viewButton, editButton, deleteButton); // Append buttons to actionCell
                        row.append(actionCell); // Append actionCell to row
                        $('#assigmentList').append(row); // Append row to courseList
                      });
                    },
                    error: function(error) {
                      console.log("Error fetching course list: ", error);
                    }
                  });
                }
            
                // Call fetchCourseList function when the document is ready
                $(document).ready(function() {
                  fetchCourseList();
                });
            
                // Submit edit course form
                $('#editCourseForm').submit(function(e) {
                  e.preventDefault(); // Prevent form submission
                  var formData = $(this).serialize(); // Serialize form data
                  $.ajax({
                    type: 'PUT',
                    url: 'http://localhost/lms/admin/api/student-assignment.php',
                    data: formData,
                    success: function(response) {
                      $('#editCourseModal').modal('hide'); // Hide modal on success
                      console.log(response);
                      fetchCourseList()
                    },
                    error: function(xhr, status, error) {
                      console.error(xhr.responseText);
                    }
                  });
                });
            
                // Confirm delete course button click event
                $('#confirmDeleteCourseBtn').click(function() {
                  var courseID = $(this).data('course-id');
                  $.ajax({
                    type: 'DELETE',
                    url: 'http://localhost/lms/admin/api/student-assignment.php',
                    data: { courseID: courseID },
                    success: function(response) {
                      $('#deleteCourseModal').modal('hide'); // Hide modal on success
                      console.log(response);
                      fetchCourseList()
                    },
                    error: function(xhr, status, error) {
                      console.error(xhr.responseText);
                    }
                  });
                });
              });
            </script> -->

            

            <!-- / Content -->


            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->

 
    <script>
      document.addEventListener('DOMContentLoaded', function () {
          // Check if user data is stored in session storage
          const userDataString = sessionStorage.getItem('userData');

          if (!userDataString) {
              // If user data is not found, redirect to the login page
              window.location.href = 'login.html'; // Replace with the actual login page URL
          }
      });
  </script>
    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="assets/vendor/libs/jquery/jquery.js"></script>
    <script src="assets/vendor/libs/popper/popper.js"></script>
    <script src="assets/vendor/js/bootstrap.js"></script>
    <script src="assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>

    <script src="assets/vendor/js/menu.js"></script>
    <!-- endbuild -->


    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- Vendors JS -->

    <!-- Main JS -->
    <script src="assets/js/main.js">  </script>     <script src="js/photo.js"></script>

     <script src="js/logout.js"></script>
    <script src="js/adminname.js"></script>
    <!-- Page JS -->

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </body>
</html>